#!/bin/bash

# üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è Student Helper Bot –Ω–∞ GitHub
# 
# –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–ï–†–ï–î –ó–ê–ü–£–°–ö–û–ú:
# 1. –ó–∞–º–µ–Ω–∏—Ç–µ YOUR_GITHUB_USERNAME –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π username
# 2. –°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub: https://github.com/new
#    - Repository name: student-helper-bot
#    - Description: üéì Telegram-–±–æ—Ç –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –¥–µ–¥–ª–∞–π–Ω–∞–º–∏
#    - Public
#    - –ù–ï –¥–æ–±–∞–≤–ª—è–π—Ç–µ README, .gitignore, license (—É –Ω–∞—Å —É–∂–µ –µ—Å—Ç—å)
# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ: chmod +x publish.sh && ./publish.sh

echo "üéì –ü—É–±–ª–∏–∫–∞—Ü–∏—è Student Helper Bot –Ω–∞ GitHub..."

# ‚ö†Ô∏è –ó–ê–ú–ï–ù–ò–¢–ï –ù–ê –í–ê–® GITHUB USERNAME!
GITHUB_USERNAME="DaniilZebzeev"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ username –∑–∞–º–µ–Ω–µ–Ω
if [ "$GITHUB_USERNAME" = "YOUR_GITHUB_USERNAME" ]; then
    echo "‚ùå –û—à–∏–±–∫–∞: –ó–∞–º–µ–Ω–∏—Ç–µ YOUR_GITHUB_USERNAME –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π GitHub username –≤ —Å–∫—Ä–∏–ø—Ç–µ!"
    echo "üìù –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª publish.sh –∏ –∏–∑–º–µ–Ω–∏—Ç–µ —Å—Ç—Ä–æ–∫—É 13"
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º Git
if ! command -v git &> /dev/null; then
    echo "‚ùå Git –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω! –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Git: https://git-scm.com/"
    exit 1
fi

# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º Git (–µ—Å–ª–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
if ! git config user.name > /dev/null 2>&1; then
    echo "üìù –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Git..."
    read -p "–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è –¥–ª—è Git: " GIT_NAME
    read -p "–í–≤–µ–¥–∏—Ç–µ –≤–∞—à email –¥–ª—è Git: " GIT_EMAIL
    git config --global user.name "$GIT_NAME"
    git config --global user.email "$GIT_EMAIL"
fi

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
echo "üîß –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è..."
git init

# –î–æ–±–∞–≤–ª—è–µ–º –≤—Å–µ —Ñ–∞–π–ª—ã
echo "üìÅ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤..."
git add .

# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ .env –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω
if git status --porcelain | grep -q "\.env$"; then
    echo "‚ö†Ô∏è  –í–Ω–∏–º–∞–Ω–∏–µ: —Ñ–∞–π–ª .env –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π!"
    echo "‚ùå –≠—Ç–æ –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ! –£–¥–∞–ª–∏—Ç–µ .env —Ñ–∞–π–ª –∏–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ .gitignore"
    echo "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å? (y/N)"
    read -r response
    if [[ ! "$response" =~ ^[Yy]$ ]]; then
        echo "‚ùå –û—Ç–º–µ–Ω–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º"
        exit 1
    fi
fi

# –°–æ–∑–¥–∞–µ–º –∫–æ–º–º–∏—Ç
echo "üíæ –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –∫–æ–º–º–∏—Ç–∞..."
git commit -m "feat: initial release of Student Helper Bot v1.0.0

‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- üìÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–µ–¥–ª–∞–π–Ω–∞–º–∏ —Å –∞–≤—Ç–æ–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è–º–∏
- üìä –†–∞—Å—á–µ—Ç —Å—Ä–µ–¥–Ω–µ–≥–æ –±–∞–ª–ª–∞ –¥–∏–ø–ª–æ–º–∞ –∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
- üéâ –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
- üéÇ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è —Å –î–†
- üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏
- üê≥ Docker –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- üìù –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ:
- Python 3.8+ —Å python-telegram-bot
- APScheduler –¥–ª—è –∑–∞–¥–∞—á –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
- –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞ –¥–µ–π—Å—Ç–≤–∏–π
- MIT –ª–∏—Ü–µ–Ω–∑–∏—è"

# –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞–µ–º –≤–µ—Ç–∫—É –≤ main
echo "üåø –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≥–ª–∞–≤–Ω–æ–π –≤–µ—Ç–∫–∏..."
git branch -M main

# –î–æ–±–∞–≤–ª—è–µ–º remote origin
echo "üîó –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ GitHub..."
git remote add origin "https://github.com/${GITHUB_USERNAME}/student-helper-bot.git"

# –ü—É—à–∏–º –≤ GitHub
echo "üöÄ –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞ –Ω–∞ GitHub..."
echo "üìù –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å–∏—Ç –ª–æ–≥–∏–Ω - –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à GitHub username"
echo "üîë –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å–∏—Ç –ø–∞—Ä–æ–ª—å - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Personal Access Token!"
echo "   –°–æ–∑–¥–∞—Ç—å —Ç–æ–∫–µ–Ω: https://github.com/settings/tokens"

if git push -u origin main; then
    echo ""
    echo "üéâ –£–°–ü–ï–®–ù–û! –ü—Ä–æ–µ–∫—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω –Ω–∞ GitHub!"
    echo ""
    echo "üîó –í–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: https://github.com/${GITHUB_USERNAME}/student-helper-bot"
    echo ""
    echo "üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:"
    echo "1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ —Ñ–∞–π–ª—ã"
    echo "2. –°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–ª–∏–∑ v1.0.0 –≤ —Ä–∞–∑–¥–µ–ª–µ Releases"
    echo "3. –î–æ–±–∞–≤—å—Ç–µ topics: telegram-bot, python, student-helper"
    echo "4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –≤ About"
    echo "5. –ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å—Å—ã–ª–∫–æ–π —Å –¥—Ä—É–∑—å—è–º–∏! üéØ"
else
    echo ""
    echo "‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –Ω–∞ GitHub!"
    echo ""
    echo "üîß –í–æ–∑–º–æ–∂–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:"
    echo "1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–∑–¥–∞–Ω –Ω–∞ GitHub"
    echo "2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ username –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π: ${GITHUB_USERNAME}"
    echo "3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Personal Access Token –≤–º–µ—Å—Ç–æ –ø–∞—Ä–æ–ª—è"
    echo "4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ"
    echo ""
    echo "üìñ –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ —Ñ–∞–π–ª–µ DEPLOY.md"
fi 